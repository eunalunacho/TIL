---
title: "[프로그래머스] : 자동차 대여 기록에서 대여중 / 대여 가능 여부 구분하기"
date: 2026-01-26 14:27:00 +0900  
categories: [SQL]                
tags: [TIL, ORACLE, MYSQL, 프로그래머스, 코딩테스트]       
permalink: /20260126_sql5/          
--- 

### 문제 링크

[문제 바로가기](https://school.programmers.co.kr/learn/courses/30/lessons/157340)



### 내 풀이
MYSQL
```sql
SELECT
    CAR_ID,
    CASE 
        WHEN 
            MAX(CASE 
                WHEN DATE_FORMAT('2022-10-16', '%Y-%m-%d') BETWEEN START_DATE AND END_DATE 
                THEN 1 ELSE 0 END) = 1 
        THEN '대여중'
        ELSE '대여 가능'
    END AS AVAILABILTY
FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY
GROUP BY CAR_ID
ORDER BY CAR_ID DESC;
```

<br>

### 다른 풀이
```sql
SELECT
    CAR_ID,
    CASE
        WHEN MAX(CASE
                    WHEN '2022-10-16' BETWEEN START_DATE AND END_DATE
                    THEN 1
                    ELSE 0
                 END) = 1
        THEN '대여중'
        ELSE '대여 가능'
    END AS AVAILABILITY
FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY
GROUP BY CAR_ID
ORDER BY CAR_ID DESC;
```

<br>

### 기록

- MAX(condition)은 '하나라도 참이면 1(True)'이 되는 로직
- '2022-10-16'은 이미 표준 날짜 형식(ISO 8601)을 따르는 문자열 상수. DB 엔진은 이를 날짜 컬럼(START_DATE)과 비교할 때 자동으로 형 변환을 수행하거나 문자열 비교를 하기에 굳이 함수를 씌울 필요가 없음 
- 구형 DB 버전이나 특정 환경에서는, 상수에 함수를 씌우면 인덱스를 제대로 타지 못하게 하거나(Index Suppressing), 매 행마다 함수를 호출하는 오버헤드가 발생할 수 있음 